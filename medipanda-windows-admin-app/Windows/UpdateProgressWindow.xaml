<Window x:Class="medipanda_windows_admin.Windows.UpdateProgressWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="업데이트 다운로드"
        Height="220"
        Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Border Background="White" 
            CornerRadius="8" 
            BorderThickness="1" 
            BorderBrush="#E0E0E0">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" 
                            ShadowDepth="0" 
                            Color="Black" 
                            Opacity="0.1"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 타이틀 바 -->
            <Border Grid.Row="0" 
                    Background="#F8F9FA" 
                    CornerRadius="8,8,0,0"
                    Height="40">
                <Grid>
                    <TextBlock Text="업데이트"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Center"
                             Margin="15,0,0,0"
                             FontWeight="Medium"
                             FontSize="14"
                             Foreground="#333"/>
                </Grid>
            </Border>

            <!-- 컨텐츠 영역 -->
            <Grid Grid.Row="1" Margin="30,25,30,30">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 아이콘과 메인 텍스트 -->
                <StackPanel Grid.Row="0" 
                          Orientation="Horizontal"
                          Margin="0,0,0,20">
                    <TextBlock Text="⬇" 
                             FontSize="24"
                             Foreground="#2C3E50"
                             Margin="0,0,10,0"
                             VerticalAlignment="Center"/>
                    <TextBlock x:Name="MainText"
                             Text="새 버전을 다운로드하고 있습니다..."
                             FontSize="16"
                             FontWeight="SemiBold"
                             Foreground="#2C3E50"
                             VerticalAlignment="Center"/>
                </StackPanel>

                <!-- 프로그레스 바 -->
                <ProgressBar x:Name="DownloadProgress"
                           Grid.Row="1"
                           Height="8"
                           Minimum="0"
                           Maximum="100"
                           Value="0"
                           Foreground="#2C3E50"
                           Background="#F0F0F0"
                           BorderThickness="0">
                    <ProgressBar.Style>
                        <Style TargetType="ProgressBar">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ProgressBar">
                                        <Grid>
                                            <Border Name="PART_Track" 
                                                  CornerRadius="4"
                                                  Background="{TemplateBinding Background}"/>
                                            <Border Name="PART_Indicator" 
                                                  CornerRadius="4"
                                                  Background="{TemplateBinding Foreground}"
                                                  HorizontalAlignment="Left"/>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ProgressBar.Style>
                </ProgressBar>

                <!-- 퍼센트 및 크기 정보 -->
                <Grid Grid.Row="2" Margin="0,8,0,0">
                    <TextBlock x:Name="PercentText"
                             Text="0%"
                             HorizontalAlignment="Left"
                             FontSize="13"
                             FontWeight="Medium"
                             Foreground="#2C3E50"/>

                    <TextBlock x:Name="SizeText"
                             Text=""
                             HorizontalAlignment="Right"
                             FontSize="11"
                             Foreground="#999"/>
                </Grid>

                <!-- 상태 메시지 -->
                <TextBlock x:Name="StatusText"
                         Grid.Row="3"
                         Text="준비 중..."
                         HorizontalAlignment="Left"
                         Margin="0,15,0,0"
                         FontSize="12"
                         Foreground="#666"/>

                <!-- 취소 버튼 -->
                <Button x:Name="CancelButton"
                       Grid.Row="4"
                       Content="취소"
                       Width="80"
                       Height="30"
                       Margin="0,15,0,0"
                       HorizontalAlignment="Right"
                       Background="#F0F0F0"
                       BorderBrush="#DDD"
                       BorderThickness="1"
                       Cursor="Hand"
                       Click="CancelButton_Click"
                       Visibility="Visible">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                              BorderBrush="{TemplateBinding BorderBrush}"
                                              BorderThickness="{TemplateBinding BorderThickness}"
                                              CornerRadius="4">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#E8E8E8"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Grid>
    </Border>
</Window>